"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6512],{7360:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>d,default:()=>o,frontMatter:()=>m,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"practice/efficienttrain/MOE/deepseekmoe","title":"DeepSeek MOE","description":"Deepseek MOE \ub17c\ubb38\uc758 \uc774\uc804 MOE \ub17c\ubb38\ub4e4\uc740 \ucd08\uae30 GShard, SwitchTransformer \uc5d0\uc11c\uc758 \ub17c\uc758 \uc774\ud6c4 \uc720\uc758\ubbf8\ud55c \uad6c\uc870 \uac1c\uc120\uc740 \uc774\ub8e8\uc5b4\uc9c0\uc9c0 \uc54a\uc558\ub2e4. \uadf8\ub7ec\ub098 transformer \uad6c\uc870, \ud2b9\ud788 decoder-only LLM\uc5d0\uc11c MOE \uac00 \uac00\uc9c0\ub294 \uc758\ubbf8\uc640 \uc5ed\ud560\uc5d0 \ub300\ud55c \uc5f0\uad6c\uac00 \uafb8\uc900\ud788 \uc9c4\ud589\ub418\uc5b4\uc654\ub2e4. Deepseek-MOE \ub17c\ubb38\uc740 \uadf8\ub7ec\ud55c \uc5f0\uad6c \uacb0\uacfc\ub4e4\uc744 \ubc14\ud0d5\uc73c\ub85c LLM\uc5d0 \uc801\uc6a9\ub41c MOE\uc758 \uc758\ubbf8\uc5d0 \ub300\ud55c \ud574\uc11d\uc744 \ubc14\ud0d5\uc73c\ub85c \uc720\uc758\ubbf8\ud55c MOE \ubaa8\ub4c8\uc758 \uad6c\uc870 \uac1c\uc120\uc744 \uc774\ub8e8\uc5b4\ub0c8\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4.","source":"@site/docs/practice/efficienttrain/MOE/deepseekmoe.md","sourceDirName":"practice/efficienttrain/MOE","slug":"/practice/efficienttrain/MOE/deepseekmoe","permalink":"/docs/practice/efficienttrain/MOE/deepseekmoe","draft":false,"unlisted":false,"editUrl":"https://github.com/logicbaron/logicbaron.github.io/tree/dev/docs/practice/efficienttrain/MOE/deepseekmoe.md","tags":[{"inline":true,"label":"MOE","permalink":"/docs/tags/moe"},{"inline":true,"label":"Transformer","permalink":"/docs/tags/transformer"}],"version":"current","sidebarPosition":6,"frontMatter":{"id":"deepseekmoe","sidebar_position":6,"tags":["MOE","Transformer"]},"sidebar":"EfficienttrainSidebar","previous":{"title":"Mixtral of Experts","permalink":"/docs/practice/efficienttrain/MOE/mistralmoe"}}');var i=n(4848),t=n(8453);const r=n.p+"assets/images/deepseek_concept-a1ef793b5df55c2f8c68b9a84f0573e7.png",l=n.p+"assets/images/deepseek_upperbound-fab74b8b797aabe8df9c75b56350becd.png",c=n.p+"assets/images/deepseek_expertefficiency-c8fe2d0b22616c72738733d1453d4796.png",m={id:"deepseekmoe",sidebar_position:6,tags:["MOE","Transformer"]},d="DeepSeek MOE",h={},p=[{value:"Deepseek MOE \uad6c\uc870",id:"deepseek-moe-\uad6c\uc870",level:2},{value:"Fine-Grained Expert Segmentation",id:"fine-grained-expert-segmentation",level:3},{value:"Shared Expert Isolation",id:"shared-expert-isolation",level:3},{value:"Load Balance Consideration",id:"load-balance-consideration",level:3},{value:"Result",id:"result",level:2},{value:"DeepseekMOE aligns closely with the upper bound of MOE Models",id:"deepseekmoe-aligns-closely-with-the-upper-bound-of-moe-models",level:3},{value:"Shared Experts are Irreplacable by Routed Experts",id:"shared-experts-are-irreplacable-by-routed-experts",level:3},{value:"Expert \ud6a8\uc728\uc131.",id:"expert-\ud6a8\uc728\uc131",level:3}];function x(e){const s={a:"a",annotation:"annotation",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",msubsup:"msubsup",ol:"ol",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"deepseek-moe",children:"DeepSeek MOE"})}),"\n",(0,i.jsx)(s.p,{children:"Deepseek MOE \ub17c\ubb38\uc758 \uc774\uc804 MOE \ub17c\ubb38\ub4e4\uc740 \ucd08\uae30 GShard, SwitchTransformer \uc5d0\uc11c\uc758 \ub17c\uc758 \uc774\ud6c4 \uc720\uc758\ubbf8\ud55c \uad6c\uc870 \uac1c\uc120\uc740 \uc774\ub8e8\uc5b4\uc9c0\uc9c0 \uc54a\uc558\ub2e4. \uadf8\ub7ec\ub098 transformer \uad6c\uc870, \ud2b9\ud788 decoder-only LLM\uc5d0\uc11c MOE \uac00 \uac00\uc9c0\ub294 \uc758\ubbf8\uc640 \uc5ed\ud560\uc5d0 \ub300\ud55c \uc5f0\uad6c\uac00 \uafb8\uc900\ud788 \uc9c4\ud589\ub418\uc5b4\uc654\ub2e4. Deepseek-MOE \ub17c\ubb38\uc740 \uadf8\ub7ec\ud55c \uc5f0\uad6c \uacb0\uacfc\ub4e4\uc744 \ubc14\ud0d5\uc73c\ub85c LLM\uc5d0 \uc801\uc6a9\ub41c MOE\uc758 \uc758\ubbf8\uc5d0 \ub300\ud55c \ud574\uc11d\uc744 \ubc14\ud0d5\uc73c\ub85c \uc720\uc758\ubbf8\ud55c MOE \ubaa8\ub4c8\uc758 \uad6c\uc870 \uac1c\uc120\uc744 \uc774\ub8e8\uc5b4\ub0c8\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"Deepseek MOE \ub17c\ubb38\uc740 \ucd1d \uc138 \uac00\uc9c0 kick\uc774 \uc874\uc7ac\ud55c\ub2e4. MOE \ubaa8\ub4c8\uc758 \uad6c\uc870 \uad00\uc810\uc5d0\uc11c 2\uac1c, \uadf8\ub9ac\uace0 \ud6a8\uc728\uc801\uc778 \uad6c\ud604 \uad00\uc810\uc5d0\uc11c 1\uac00\uc9c0 kick\uc774 \uc788\ub2e4."}),"\n",(0,i.jsx)(s.h2,{id:"deepseek-moe-\uad6c\uc870",children:"Deepseek MOE \uad6c\uc870"}),"\n",(0,i.jsx)(s.p,{children:"Deepseek MOE \uad6c\uc870\uc5d0 \ub300\ud574 \ub450 \uac00\uc9c0 \uac1c\uc120\uc548\uc744 \uc81c\uc548\ud55c\ub2e4. \uccab \ubc88\uca30\ub294 Fine-Grained Expert Segmentation, \ub450 \ubc88\uc9f8\ub294 Shared Expert Isolation \uc774\ub2e4."}),"\n",(0,i.jsx)("div",{style:{textAlign:"Center"},children:(0,i.jsx)("img",{src:r,style:{border:"solid",width:600}})}),"\n",(0,i.jsx)(s.h3,{id:"fine-grained-expert-segmentation",children:"Fine-Grained Expert Segmentation"}),"\n",(0,i.jsxs)(s.p,{children:["\uae30\uc874\uc758 LLM MOE \ubaa8\ub4c8 E\uac1c\uc758 Experts FFN Layer\ub97c \uc0ac\uc6a9\ud558\uace0 \uadf8 \uc911 K\uac1c\ub97c \uc120\ud0dd\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4. ",(0,i.jsx)(s.a,{href:"/docs/practice/efficienttrain/MOE/mistralmoe",children:"Mixtral"}),"\uc5d0\uc11c\ub294 \uac01 expert\uc758 \uc5ed\ud560\uc744 \uc2ec\uce35\uc801\uc73c\ub85c \ubd84\uc11d\ud558\uc5ec \uac01 expert\ub294 semantic \ubd84\uc11d\ubcf4\ub2e4\ub294 syntatic \ubd84\uc11d\uc5d0 \uac15\ud558\ub2e4\ub294 \uc0ac\uc2e4\uc744 \ubc1d\ud600\ub0b8\ub2e4. \ub610\ud55c, input/output \uc5d0 \uac00\uae4c\uc6b4 layer\uc77c\uc218\ub85d \ubd84\uc11d\ud558\ub294 \uac00\uae4c\uc6b4 token\ub4e4\uac04\uc758 \uc0c1\ud638\uc791\uc6a9\uc5d0 \uc9d1\uc911\ud55c\ub2e4\uace0 \uc774\uc57c\uae30\ud55c\ub2e4."]}),"\n",(0,i.jsx)(s.p,{children:"Deepseek \uc800\uc790\ub4e4\uc740 \uac01 expert \uc758 \uc5ed\ud560\uc774 \ubd84\uba85\ud788 \ub098\ub204\uc5b4\uc9c0\uace0 \uc788\ub2e4\ub294 \uc0ac\uc2e4\uc5d0 \uc9d1\uc911\ud588\ub2e4. \ud6e8\uc52c \ub2e4\uc591\ud55c \uc5ed\ud560\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub3c4\ub85d expert \ub97c \ub9ce\uc774 \ub298\ub9ac\uba74 \uc88b\uc9c0\ub9cc \uadf8\ub7ec\uae30\uc5d4 LLM \ubaa8\ub378\uc758 \uc7a0\uc7ac parameter \uc218\uc758 \ud55c\uacc4\uac00 \uba85\ud655\ud588\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"Deepseek \uc800\uc790\ub4e4\uc740 \uc5ed\ud560\uc774 \ucda9\ubd84\ud788 \uc138\ubd84\ud654\ub41c\ub2e4\uba74 \uac01 expert \uc758 \ud06c\uae30\uac00 \ud06c\uc9c0 \uc54a\uc544\ub3c4 \ub418\uba70, \uc5b4\ub824\uc6b4 \uc791\uc5c5\uc740 \ub2e4\uc591\ud55c expert \ub4e4\uc774 \ud568\uaed8 \ud65c\uc131\ud654\ub418\uc5b4 \ucc98\ub9ac \uac00\ub2a5\ud558\ub2e4\uace0 \uc0dd\uac01\ud588\ub2e4. \uadf8\ub798\uc11c \uae30\uc874 expert-FFN \ud558\ub098\ub97c m \uac1c\ub85c \ub098\ub204\uc5c8\ub2e4. \uac01\uac01\uc758 fine-grained expert \uc758 \ud06c\uae30\ub294 1/m\ubc30\uac00 \ub418\uba70, \uc804\uccb4 expert \uac1c\uc218\ub294 m\ubc30\uac00 \ub41c\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"Fine-grained expert \uc5d0\uc11c\ub294 \uc120\ud0dd\ud558\ub294 Expert \uc758 \uac1c\uc218 K\ub3c4 m\ubc30\uac00 \ub418\uc5b4 \ucd1d mK\uac1c expert\ub97c \uc120\ud0dd\ud574\uc57c \ud55c\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\uc608\ub97c \ub4e4\uc5b4, 16\uac1c expert \uc911 2\uac1c\ub97c \uc120\ud0dd\ud55c\ub2e4\uba74 120\uac1c\uc758 \uac00\ub2a5\ud55c expert \uc870\ud569\uc774 \uc874\uc7ac\ud558\uc9c0\ub9cc m=4\ub85c \ub450\uace0 fine-grained expert MOE\ub97c \uc0ac\uc6a9\ud558\uba74 \ucd1d 16*4=64\uac1c expert \uc911 2*4=8\uac1c expert\ub97c \uc120\ud0dd\ud574\uc57c \ud55c\ub2e4. \uac00\ub2a5\ud55c \uc870\ud569\uc758 \uc218\ub294 4,426,165,368\uac1c\uc774\ub2e4. active parameter \uc218\ub294 \uac19\uc9c0\ub9cc expert \uc758 \uc870\ud569\uc740 \ud6e8\uc52c \ubc29\ub300\ud574\uc9c4\ub2e4. \uac01\uac01\uc758 \uc804\ubb38\uac00\uc758 \uc131\ub2a5\uc740 \ubcf4\ub2e4 \ube48\uc57d\ud560 \uc218 \uc788\uc9c0\ub9cc \uc870\ud569\uc758 \uc218\uac00 \ud6e8\uc52c \ubc29\ub300\ud558\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\uc774 \uc124\uacc4\uc758 \ucca0\ud559\uc740 neural network\uc758 \uc124\uacc4 \ucca0\ud559\uacfc\ub3c4 \ube44\uc2b7\ud558\ub2e4. \ub2e8\uc21c\ud55c \uc77c\uc744 \ucc98\ub9ac\ud558\ub294 \ubaa8\ub4c8\uc744 \uc870\ud569\ud574 \ubb34\ud55c\ud55c \uacbd\uc6b0\uc758 \uc218\ub97c \ucc98\ub9ac\ud55c\ub2e4."}),"\n",(0,i.jsx)(s.h3,{id:"shared-expert-isolation",children:"Shared Expert Isolation"}),"\n",(0,i.jsx)(s.p,{children:"\uae30\uc874 MOE, \uadf8\ub9ac\uace0 Fine-grained expert \uc801\uc6a9\ud588\uc744 \ub54c\uc758 \ubb38\uc81c\uc810 \uc911 \ud558\ub098\ub294 \uc804\ubc18\uc801\uc778 \ubb38\ub9e5\uc744 \uc804\ubd80 \ud30c\uc545\ud560 \uc218 \uc788\ub294 \uc804\ubb38\uac00\uac00 \uc5c6\ub2e4\ub294 \uc810\uc774\ub2e4. \uc544\ubb34\ub9ac \uc804\ubb38\uac00\uac00 \ubcf8\uc778\uc758 \uc5ed\ud560\uc744 \uc798 \uc218\ud589\ud55c\ub2e4 \ud574\ub3c4, \uc804\uccb4\uc801\uc778 \ud1a0\ud070\uc744 \ubcf4\uc9c0 \uc54a\uace0\ub294 \uc9c0\uc5fd\uc801\uc778 \ud574\uc11d\ubc16\uc5d0 \uc774\ub8e8\uc5b4\uc9c8 \uc218 \uc5c6\ub2e4. \ubb3c\ub860 \uc804\uccb4 \ubaa8\ub378 \uacfc\uc810\uc5d0\uc11c\ub294 attention layer \uac00 \uc804\uccb4 \ubb38\ub9e5\uc744 \ud30c\uc545\ud558\uace0 \uc870\uc728\ud558\ub294 \uc5ed\ud560\uc744 \uc218\ud589\ud560 \uc218 \uc788\uc9c0\ub9cc attention layer\uc640 FFN layer\uc758 \uc5ed\ud560\uc740 \uc5c4\uc5f0\ud788 \ub2e4\ub978\ub9cc\ud07c, \uc804\uccb4\uc801\uc778 \ubb38\ub9e5 \ud30c\uc545\uc744 \ud558\ub294 \uc804\ubb38\uac00\ub3c4 \ud544\uc694\ud558\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\uc0ac\uacac\uc774\uc9c0\ub9cc, \uc804\ubc18\uc801\uc778 \ubb38\ub9e5 \ud30c\uc545\uc758 \ud544\uc694\uc131\uc740 \ubaa8\ub378 \ud559\uc2b5 \uacfc\uc815\uc5d0\uc11c\ub3c4 \uad00\ucc30\ub41c\ub2e4. \ucd08\ucc3d\uae30\ubd80\ud130 MOE \ubaa8\ub378\uc744 \ud559\uc2b5\uc2dc\ud0a4\ub294 \ub370 \uc788\uc5b4\uc11c load balancing \uc774 \uc8fc\uc694\ud55c \uc7c1\uc810\uc774\uc5c8\ub294\ub370 \uc774\ub294 \ud559\uc2b5 \uacfc\uc815\uc5d0\uc11c \uc77c\ubd80 expert \ub85c \ud1a0\ud070\uc774 \uc9d1\uc911\ub418\ub294 \ud604\uc0c1 \ub54c\ubb38\uc774\uc5c8\ub2e4. (routing collapse.) \uc774\ub294 \ubaa8\ub378 \ud559\uc2b5 \uacfc\uc815, \ud2b9\ud788 \ucd08\ubc18\uc5d0 \uc804\uccb4\uc801\uc778 \ubb38\ub9e5\uc744 \ud30c\uc545\ud558\ub294 expert \uac00 \uc88b\uc740 \uc131\ub2a5\uc744 \ubcf4\uc5ec\uc8fc\uace0 \uc774\ub85c \uc778\ud574 routing \uc54c\uace0\ub9ac\uc998\uc774 \uc9c0\uc18d\uc801\uc73c\ub85c \ud574\ub2f9 expert \ub85c \ud1a0\ud070\uc744 \uc9d1\uc911\uc2dc\ud0a4\ub294 \ud604\uc0c1\uc774\ub2e4. \uc774 \ud604\uc0c1\uc774 \uc5ed\uc124\uc801\uc73c\ub85c \uc804\uccb4\uc801\uc778 \ud1a0\ud070\uc744 \ucc98\ub9ac\ud558\ub294 \uc804\ubb38\uac00\uc758 \uc911\uc694\uc131\uc744 \uc2dc\uc0ac\ud55c\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\ud6c4\uc220\ud558\uaca0\uc9c0\ub9cc Deepseek \ub294 \ub9e4\uc6b0 \ud6a8\uc728\uc801\uc774\uace0 \ub6f0\uc5b4\ub09c load balancing \uae30\ubc95\uc744 \uc801\uc6a9\ud588\ub2e4. \uadf8\ub9ac\uace0 \uadf8 \uc640 \ubcc4\uac1c\ub85c \uc804\ubc18\uc801\uc778 token\uc744 \ucc98\ub9ac\ud558\ub294 expert\ub97c \ub530\ub85c \uc9c0\uc815\ud574\uc11c \uc0ac\uc6a9\ud588\ub2e4. \ud574\ub2f9 expert\ub4e4\uc740 routing \ubaa8\ub4c8\uacfc \ubcc4\uac1c\ub85c \uc5b8\uc81c\ub098 \ubaa8\ub4e0 token\uc744 input\uc73c\ub85c \ubc1b\ub294\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\ub17c\ubb38\uc5d0\uc11c\ub294 \uc57d 1~2\uac1c\uc758 Shared Expert\ub97c \uc0ac\uc6a9\ud558\uba70 ablation study\ub97c \uc218\ud589\ud588\ub2e4."}),"\n",(0,i.jsx)(s.h3,{id:"load-balance-consideration",children:"Load Balance Consideration"}),"\n",(0,i.jsx)(s.p,{children:"\ub450 \uac00\uc9c0 \ubc29\uc2dd\uc758 load-balancing\uc744 \uad6c\ud604\ud568."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Expert-level balance loss","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"loss \ud568\uc218\uc5d0 expert \uc5d0 \ud560\ub2f9\ub41c \ud1a0\ud070\uc758 \uc218 * token-to-expert affinity \uc73c\ub85c \uc124\uacc4."}),"\n",(0,i.jsx)(s.li,{children:"token-to-expert affinity \ub780 \ud1a0\ud070\uc774 \ud574\ub2f9 expert \ub97c \uc120\ud0dd\ud560 \ud655\ub960\uc758 \ud569\uc73c\ub85c \uc124\uacc4."}),"\n",(0,i.jsxs)(s.li,{children:["token-top-expert affinity \ub294 \uc815\ud655\ud788\ub294 ",(0,i.jsxs)(s.span,{className:"katex",children:[(0,i.jsx)(s.span,{className:"katex-mathml",children:(0,i.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(s.semantics,{children:[(0,i.jsxs)(s.mrow,{children:[(0,i.jsx)(s.mi,{children:"S"}),(0,i.jsx)(s.mi,{children:"o"}),(0,i.jsx)(s.mi,{children:"f"}),(0,i.jsx)(s.mi,{children:"t"}),(0,i.jsx)(s.mi,{children:"m"}),(0,i.jsx)(s.mi,{children:"a"}),(0,i.jsx)(s.mi,{children:"x"}),(0,i.jsx)(s.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(s.msubsup,{children:[(0,i.jsx)(s.mi,{children:"u"}),(0,i.jsx)(s.mi,{children:"t"}),(0,i.jsxs)(s.mrow,{children:[(0,i.jsx)(s.mi,{children:"l"}),(0,i.jsx)(s.mi,{children:"T"})]})]}),(0,i.jsxs)(s.msubsup,{children:[(0,i.jsx)(s.mi,{children:"e"}),(0,i.jsx)(s.mi,{children:"i"}),(0,i.jsx)(s.mi,{children:"l"})]}),(0,i.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(s.annotation,{encoding:"application/x-tex",children:"Softmax(u_t^{lT} e_i^{l})"})]})})}),(0,i.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"1.1078em",verticalAlign:"-0.2587em"}}),(0,i.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,i.jsx)(s.span,{className:"mord mathnormal",children:"o"}),(0,i.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,i.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,i.jsx)(s.span,{className:"mord mathnormal",children:"ma"}),(0,i.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,i.jsx)(s.span,{className:"mopen",children:"("}),(0,i.jsxs)(s.span,{className:"mord",children:[(0,i.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,i.jsx)(s.span,{className:"msupsub",children:(0,i.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(s.span,{className:"vlist-r",children:[(0,i.jsxs)(s.span,{className:"vlist",style:{height:"0.8491em"},children:[(0,i.jsxs)(s.span,{style:{top:"-2.453em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})})]}),(0,i.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"lT"})})})]})]}),(0,i.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(s.span,{className:"vlist-r",children:(0,i.jsx)(s.span,{className:"vlist",style:{height:"0.247em"},children:(0,i.jsx)(s.span,{})})})]})})]}),(0,i.jsxs)(s.span,{className:"mord",children:[(0,i.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,i.jsx)(s.span,{className:"msupsub",children:(0,i.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(s.span,{className:"vlist-r",children:[(0,i.jsxs)(s.span,{className:"vlist",style:{height:"0.8491em"},children:[(0,i.jsxs)(s.span,{style:{top:"-2.4413em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",children:"i"})})]}),(0,i.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"})})})]})]}),(0,i.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(s.span,{className:"vlist-r",children:(0,i.jsx)(s.span,{className:"vlist",style:{height:"0.2587em"},children:(0,i.jsx)(s.span,{})})})]})})]}),(0,i.jsx)(s.span,{className:"mclose",children:")"})]})})]})," \ub85c \ud45c\ud604\ub428.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsxs)(s.span,{className:"katex",children:[(0,i.jsx)(s.span,{className:"katex-mathml",children:(0,i.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(s.semantics,{children:[(0,i.jsx)(s.mrow,{children:(0,i.jsxs)(s.msubsup,{children:[(0,i.jsx)(s.mi,{children:"u"}),(0,i.jsx)(s.mi,{children:"t"}),(0,i.jsxs)(s.mrow,{children:[(0,i.jsx)(s.mi,{children:"l"}),(0,i.jsx)(s.mi,{children:"T"})]})]})}),(0,i.jsx)(s.annotation,{encoding:"application/x-tex",children:"u_t^{lT}"})]})})}),(0,i.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"1.0961em",verticalAlign:"-0.247em"}}),(0,i.jsxs)(s.span,{className:"mord",children:[(0,i.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,i.jsx)(s.span,{className:"msupsub",children:(0,i.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(s.span,{className:"vlist-r",children:[(0,i.jsxs)(s.span,{className:"vlist",style:{height:"0.8491em"},children:[(0,i.jsxs)(s.span,{style:{top:"-2.453em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"})})]}),(0,i.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"lT"})})})]})]}),(0,i.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(s.span,{className:"vlist-r",children:(0,i.jsx)(s.span,{className:"vlist",style:{height:"0.247em"},children:(0,i.jsx)(s.span,{})})})]})})]})]})})]})," \ub294 routing \ud568\uc218 input, ",(0,i.jsxs)(s.span,{className:"katex",children:[(0,i.jsx)(s.span,{className:"katex-mathml",children:(0,i.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(s.semantics,{children:[(0,i.jsx)(s.mrow,{children:(0,i.jsxs)(s.msubsup,{children:[(0,i.jsx)(s.mi,{children:"e"}),(0,i.jsx)(s.mi,{children:"i"}),(0,i.jsx)(s.mi,{children:"l"})]})}),(0,i.jsx)(s.annotation,{encoding:"application/x-tex",children:"e_i^{l}"})]})})}),(0,i.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(s.span,{className:"base",children:[(0,i.jsx)(s.span,{className:"strut",style:{height:"1.1078em",verticalAlign:"-0.2587em"}}),(0,i.jsxs)(s.span,{className:"mord",children:[(0,i.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,i.jsx)(s.span,{className:"msupsub",children:(0,i.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(s.span,{className:"vlist-r",children:[(0,i.jsxs)(s.span,{className:"vlist",style:{height:"0.8491em"},children:[(0,i.jsxs)(s.span,{style:{top:"-2.4413em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",children:"i"})})]}),(0,i.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(s.span,{className:"mord mtight",children:(0,i.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"})})})]})]}),(0,i.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(s.span,{className:"vlist-r",children:(0,i.jsx)(s.span,{className:"vlist",style:{height:"0.2587em"},children:(0,i.jsx)(s.span,{})})})]})})]})]})})]})," \ub294 \ub77c\uc6b0\ud305 \ubaa8\ub4c8\uc774 \uac00\uc9c0\uace0 \uc788\ub294 centroid of each expert."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"\uc77c\uc885\uc758 2-nd order polynomial \uc774\ubbc0\ub85c \uade0\ub4f1 \ubd84\ubc30\ub85c \ud559\uc2b5\ub418\uac8c \ub41c\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Device-level balance loss","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"loss \ud568\uc218\uc5d0 device\uc5d0 \ud560\ub2f9\ub41c \ud1a0\ud070\uc758 \uc218 * token-to-expert affinity \uc73c\ub85c \uc124\uacc4."}),"\n",(0,i.jsx)(s.li,{children:"\ub9c8\ucc2c\uac00\uc9c0\ub85c, \uc77c\uc885\uc758 2-nd order polynomial \uc774\ubbc0\ub85c \uade0\ub4f1 \ubd84\ubc30\ub85c \ud559\uc2b5\ub418\uac8c \ub41c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"result",children:"Result"}),"\n",(0,i.jsx)(s.h3,{id:"deepseekmoe-aligns-closely-with-the-upper-bound-of-moe-models",children:"DeepseekMOE aligns closely with the upper bound of MOE Models"}),"\n",(0,i.jsx)("div",{style:{textAlign:"Center"},children:(0,i.jsx)("img",{src:l,style:{border:"solid",width:600}})}),"\n",(0,i.jsx)(s.p,{children:"DeepseekMOE \ub17c\ubb38\uc5d0\uc11c\ub294 \uae30\uc874 acitvate parameter \uae30\uc900\uc73c\ub85c dense model\uacfc \ube44\uad50\ud558\ub358 \ubc29\uc2dd\uc5d0\uc11c \ubc97\uc5b4\ub098 \uc2e4\uc81c parameter \uc218\ub97c \uae30\uc900\uc73c\ub85c dense \ubaa8\ub378\uacfc \ube44\uad50\ud55c\ub2e4. \uadf8\ub9ac\uace0 \uc774\ub807\uac8c \ube44\uad50\ud55c \uc2e4\uc81c dense \ubaa8\ub378\uacfc \uc131\ub2a5 \ucc28\uc774\uac00 \uac70\uc758 \uc5c6\uc5b4\uc84c\uc74c\uc744 \uc774\uc57c\uae30\ud55c\ub2e4. \uc544\uc8fc \ud070 \uc2dc\uc0ac\uc810\uc778\ub370, deepseekMOE \ub294 \uae30\uc874 dense model \uc774 \uac00\uc9c0\uace0 \uc788\ub358 \uac70\uc758 \ube44\ud6a8\uc728\uc801\uc778 \ubd80\ubd84\ub9cc \uc81c\uac70\ud55c \uad6c\uc870\ub97c \uc644\uc131\ud588\ub2e4\ub294 \uc758\ubbf8\ub97c \uac00\uc9c4\ub2e4."}),"\n",(0,i.jsx)(s.h3,{id:"shared-experts-are-irreplacable-by-routed-experts",children:"Shared Experts are Irreplacable by Routed Experts"}),"\n",(0,i.jsx)(s.p,{children:"Shared expert \ud558\ub098\ub97c \uc5c6\uc560\uace0 routed experts \ub97c \ucd94\uac00\ud55c \uc2e4\ud5d8\uc5d0\uc11c \uc720\uc758\ubbf8\ud55c pie loss \uc99d\uac00 (1.808 -> 2.414) \ub97c \ud655\uc778\ud568."}),"\n",(0,i.jsx)(s.h3,{id:"expert-\ud6a8\uc728\uc131",children:"Expert \ud6a8\uc728\uc131."}),"\n",(0,i.jsx)(s.p,{children:"DeepseekMOE experts \ub294 \ud6e8\uc52c \uc815\ud655\ud558\uace0 \ud6a8\uc728\uc801\uc73c\ub85c \uc815\ubcf4\ub97c \ucc98\ub9ac\ud55c\ub2e4."}),"\n",(0,i.jsx)("div",{style:{textAlign:"Center"},children:(0,i.jsx)("img",{src:c,style:{border:"solid",width:600}})}),"\n",(0,i.jsx)(s.p,{children:"DeepseekMOE \ubaa8\ub378\uc5d0\uc11c expert \uc218\ub97c \ubcc0\uacbd\ud574\uac00\uba70 GShard \ubaa8\ub378\uacfc \ube44\uad50\ud568."}),"\n",(0,i.jsx)(s.h1,{id:"ref",children:"Ref"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://arxiv.org/pdf/2401.06066",children:"DeepseekMOE"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://arxiv.org/pdf/2401.04088",children:"Mixtral of Experts"})}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var a=n(6540);const i={},t=a.createContext(i);function r(e){const s=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(t.Provider,{value:s},e.children)}}}]);