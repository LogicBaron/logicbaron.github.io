"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3666],{8453:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>l});var i=r(6540);const n={},s=i.createContext(n);function a(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(s.Provider,{value:t},e.children)}},9340:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>m,contentTitle:()=>x,default:()=>u,frontMatter:()=>p,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"practice/efficienttrain/MOE/mistralmoe","title":"Mixtral of Experts","description":"mistral \uc5d0\uc11c \uc81c\uc548\ud558\ub294 MOE LLM. decoder-only transformer architecture\uc5d0 MOE\ub97c \uc0ac\uc6a9\ud588\ub2e4. \uac01 layer\uc5d0\uc11c \uac01 \ud1a0\ud070\uc740 2\uac1c\uc758 expert\ub85c \ub77c\uc6b0\ud305 (Top-2 Routing)\ub41c\ub2e4. \uacb0\uacfc\uc801\uc73c\ub85c mixtral 8x7B \ubaa8\ub378\uc5d0\uc11c \uac01 \ud1a0\ud070\uc740 47B\uac1c\uc758 parameter\uc5d0 \uc811\uadfc\uac00\ub2a5\ud558\uc9c0\ub9cc \uc2e4\uc81c\ub85c \ud65c\uc131\ud654\ub418\ub294 parameter\ub294 13B \uc218\uc900\uc774 \ub41c\ub2e4.","source":"@site/docs/practice/efficienttrain/MOE/mistralmoe.md","sourceDirName":"practice/efficienttrain/MOE","slug":"/practice/efficienttrain/MOE/mistralmoe","permalink":"/docs/practice/efficienttrain/MOE/mistralmoe","draft":false,"unlisted":false,"editUrl":"https://github.com/logicbaron/logicbaron.github.io/tree/dev/docs/practice/efficienttrain/MOE/mistralmoe.md","tags":[{"inline":true,"label":"MOE","permalink":"/docs/tags/moe"},{"inline":true,"label":"Transformer","permalink":"/docs/tags/transformer"}],"version":"current","sidebarPosition":5,"frontMatter":{"id":"mistralmoe","sidebar_position":5,"tags":["MOE","Transformer"]},"sidebar":"EfficienttrainSidebar","previous":{"title":"Efficient MOE","permalink":"/docs/practice/efficienttrain/MOE/moe3"},"next":{"title":"DeepSeek MOE","permalink":"/docs/practice/efficienttrain/MOE/deepseekmoe"}}');var n=r(4848),s=r(8453);const a=r.p+"assets/images/mixtral_result-76a631ad7c44651bdfb996e902a533d2.png",l=r.p+"assets/images/mixtral_longrange-7f971a119c3e83ea934d22c976f651df.png",o=r.p+"assets/images/mixtral_consecutive-dbc81d2185a3d2bd132b98ad85b9d3ed.png",c=r.p+"assets/images/mixtral_routingexample-7a91cc6afda511bd4f4702204823615c.png",d=r.p+"assets/images/mixtral_routing-526b95959d2b999085f9347887e31e7e.png",p={id:"mistralmoe",sidebar_position:5,tags:["MOE","Transformer"]},x="Mixtral of Experts",m={},h=[{value:"Results",id:"results",level:2},{value:"Long range performance",id:"long-range-performance",level:3},{value:"Instruction Fine-tuning",id:"instruction-fine-tuning",level:3},{value:"Routing Analysis",id:"routing-analysis",level:2}];function f(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"mixtral-of-experts",children:"Mixtral of Experts"})}),"\n",(0,n.jsx)(t.p,{children:"mistral \uc5d0\uc11c \uc81c\uc548\ud558\ub294 MOE LLM. decoder-only transformer architecture\uc5d0 MOE\ub97c \uc0ac\uc6a9\ud588\ub2e4. \uac01 layer\uc5d0\uc11c \uac01 \ud1a0\ud070\uc740 **2\uac1c\uc758 expert\ub85c \ub77c\uc6b0\ud305 (Top-2 Routing)**\ub41c\ub2e4. \uacb0\uacfc\uc801\uc73c\ub85c mixtral 8x7B \ubaa8\ub378\uc5d0\uc11c \uac01 \ud1a0\ud070\uc740 47B\uac1c\uc758 parameter\uc5d0 \uc811\uadfc\uac00\ub2a5\ud558\uc9c0\ub9cc \uc2e4\uc81c\ub85c \ud65c\uc131\ud654\ub418\ub294 parameter\ub294 13B \uc218\uc900\uc774 \ub41c\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:"\uc774\uc804 \uae00\uc5d0\uc11c \ub77c\uc6b0\ud305 \ubc29\uc2dd\uc5d0 \ub300\ud574\uc11c \ub9ce\uc774 \ub2e4\ub8e8\uc5c8\uace0, mixtral \uc5d0\uc11c routing \ubc29\uc2dd\uc5d0\uc11c \uc720\uc758\ubbf8\ud55c contribution\uc744 \uc81c\uc2dc\ud558\uc9c0 \uc54a\uc558\uae30\uc5d0 \ub77c\uc6b0\ud305 \uc54c\uace0\ub9ac\uc998\uc5d0 \ub300\ud55c \uc124\uba85\uc740 \uc0dd\ub7b5\ud55c\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:"experts \ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc740 dense model\uc778 mistral 7B \ub3c4 \ud559\uc2b5\uc2dc\ucf1c \ube44\uad50\ud568. mixtral \ubaa8\ub378\uc740 \uac19\uc740 \uad6c\uc870\uc5d0 8\uac1c\uc758 expert\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c mixtral 8x7B\ub77c \uba85\uba85\ud55c\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:"baseline \uc73c\ub85c \ub2e4\uc591\ud55c \ud06c\uae30\uc758 Llama \ubaa8\ub378\uc744 \uc0ac\uc6a9."}),"\n",(0,n.jsx)(t.p,{children:"\uacb0\uacfc\ub3c4 \uc7ac\ubbf8\uc788\ub294\ub370, \ubd84\uc11d\uc774 \ub354 \uc7ac\ubbf8\uc788\ub2e4."}),"\n",(0,n.jsx)(t.h2,{id:"results",children:"Results"}),"\n",(0,n.jsx)(t.p,{children:"Mistral 7B, Mixtral 8x7B \ubaa8\ub378\uc744 Llama baseline \ubaa8\ub378\uacfc \ube44\uad50\ud568."}),"\n",(0,n.jsx)("div",{style:{textAlign:"Center"},children:(0,n.jsx)("img",{src:a,style:{border:"solid",width:600}})}),"\n",(0,n.jsx)(t.p,{children:"mixtral 8x7B \ubaa8\ub378\uc758 \uc131\ub2a5\uc740 \ub300\ubd80\ubd84\uc758 task\uc5d0\uc11c llama 2 70B \ubaa8\ub378\uacfc \uc131\ub2a5\uc774 \ube44\uc2b7\ud558\uac70\ub098, \ub354 \uc88b\uc740 \uc131\ub2a5\uc744 \ubcf4\uc5ec\uc904 \ub54c\ub3c4 \uc788\uc74c. \uc800\uc790\ub4e4\uc740 active parameter\uc640 \ucd94\ub860 \ub2a5\ub825\uc774 \ud544\uc694\ud55c \uc5b4\ub824\uc6b4 \uacfc\uc81c\uc5d0\uc11c\uc758 \uc131\ub2a5\ub3c4 \ube44\uad50\ud55c\ub2e4. mixtral \ubaa8\ub378\uc774 active parameter \uc218\uc5d0 \ube44\ud574 \uc77c\ubc18\uc801\uc73c\ub85c \uc88b\uc740 \uc131\ub2a5\uc744 \ubcf4\uc5ec\uc900\ub2e4. \ub2e4\ub9cc moe \ubaa8\ub378\uc758 \uc7a0\uc7ac parameter \uc218\ub294 \uc77c\ubc18\uc801\uc73c\ub85c \ud6e8\uc52c \ub9ce\uc73c\ubbc0\ub85c \uc815\ub2f9\ud55c \ube44\uad50\ub77c\uace0 \ubcf4\uae30 \uc5b4\ub835\ub2e4\ub294 \ub0b4\uc6a9\uc744 \uc774\uc804 \uae00\uc5d0\uc11c\ub3c4 \uafb8\uc900\ud788 \uc800\uc790\ub4e4\ub3c4 \uc774 \uc810\uc5d0 \ub300\ud574 \uc5b8\uae09\ud55c\ub2e4."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"Note that this analysis focses on the active parameter count, which is directly proportional to the inference compute cost, but does not consider the memory cost and hardward utilization.\n"})}),"\n",(0,n.jsx)(t.p,{children:"\ucd5c\uadfc(2025.04) \uc758 LLM \ub17c\ubb38\ub4e4\uc740 MOE\ub97c \ub2f9\uc5f0\ud558\uac8c \uc801\uc6a9\ud558\ubbc0\ub85c \ubaa8\ub378\uc758 \ud06c\uae30\ub97c \uc801\uc744\ub54c active parameter \ub9cc\uc744 \uc0ac\uc6a9\ud558\uae30\ub3c4 \ud55c\ub2e4."}),"\n",(0,n.jsx)(t.h3,{id:"long-range-performance",children:"Long range performance"}),"\n",(0,n.jsxs)(t.p,{children:["Mixtral \uc774 long context \uc5d0 \uc5bc\ub9c8\ub098 \uc798 \ub300\uc751\ud558\ub294\uc9c0 \ud655\uc778\ud558\uae30 \uc704\ud574\uc11c \uc800\uc790\ub4e4\uc740 ",(0,n.jsx)(t.strong,{children:"passkey retrieval"})," \ud0dc\uc2a4\ud06c\ub97c \ud655\uc778\ud568. passkey retrieval task \ub294 \uc5c4\uccad \uae34 \ubb38\uc11c \uc548\uc5d0\uc11c passkey \ub97c \ucc3e\uc544\ub0b4\ub294 \uacfc\uc81c\uc784. mixtral \uc740 sequence \uae38\uc774\uc640 \uc0c1\uad00\uc5c6\uc774 100% retrieval \uc815\ud655\ub3c4\ub97c \ubcf4\uc5ec\uc92c\uc74c. \ub610\ud55c, proof-pile dataset \uc5d0\uc11c context \uae38\uc774\uac00 \ub298\uc5b4\ub0a8\uc5d0 \ub530\ub77c perplexity \uac00 \uac10\uc18c\ud558\ub294 \uacb0\uacfc\ub3c4 \ud655\uc778\ub418\uc5c8\ub2e4. proof-pile dataset \uc740 \uc218\ud559\uc801 \ud14d\uc2a4\ud2b8\uc640 \ucf54\ub4dc\ub85c \uad6c\uc131\ub41c \uace0\ud488\uc9c8 \ub370\uc774\ud130\uc151\uc73c\ub85c \uc8fc\ub85c \uc218\ud559\uc801 \ucd94\ub860 \ubc0f \uc790\ub3d9\ud654\ub41c \uc99d\uba85 \uc791\uc5c5\uc744 \uc704\ud55c \uc5b8\uc5b4\ubaa8\ub378\uc744 \ud6c8\ub828/\ud3c9\uac00\ud558\ub294\ub370 \uc0ac\uc6a9\ub41c\ub2e4."]}),"\n",(0,n.jsx)("div",{style:{textAlign:"Center"},children:(0,n.jsx)("img",{src:l,style:{border:"solid",width:600}})}),"\n",(0,n.jsx)(t.p,{children:"\ub300\ubd80\ubd84\uc758 LLM\uc740 \ud6c8\ub828 \ubb38\ub9e5 \uae38\uc774\ub97c \ub118\uc5b4\uc11c\uba74 \uc131\ub2a5\uc774 \uc800\ud558\ub418\uc9c0\ub9cc, mixtral\uc740 \ub450 \uac00\uc9c0 \uc2e4\ud5d8\uc5d0\uc11c \uae34 \ubb38\ub9e5\uc5d0 \uac15\ud55c \ub300\uc751 \ub2a5\ub825\uc744 \ubcf4\uc5ec\uc90c. \uc774\ub294 MOE \uc758 \ud6a8\uc728\uc801\uc778 \uad6c\uc870 - \ud1a0\ud070 \ub2f9 \uc2e4\uc81c\ub85c\ub294 13B active parameter \ub9cc \uc0ac\uc6a9 - \ubaa8\ub378\uc774 \uae34 \uc785\ub825 \uc2dc\ud000\uc2a4 \ub0b4\uc5d0\uc11c \uc815\ubcf4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ucd94\ucd9c\ud558\uace0 \ud559\uc2b5\ud588\uc74c\uc744 \uc758\ubbf8\ud55c\ub2e4. \ub2e4\ub9cc, perplexity \uac10\uc18c\uac00 \ubc18\ub4dc\uc2dc \ubb38\uc11c \uc694\uc57d\uc774\ub098 \uba40\ud2f0\ud134 \ub300\ud654 \uac19\uc740 \uc2e4\uc81c \uc131\ub2a5\uacfc \uc9c1\uacb0\ub418\uc9c0\ub294 \uc54a\ub294\ub2e4."}),"\n",(0,n.jsx)(t.h3,{id:"instruction-fine-tuning",children:"Instruction Fine-tuning"}),"\n",(0,n.jsx)(t.p,{children:"\uc800\uc790\ub4e4\uc740 supervised fine-tuning \uc744 \uc774\uc6a9\ud574 Mixtral - Instruct \ub97c \ud559\uc2b5\uc2dc\ucf30\uace0, best open-weights model \uc744 \ub2ec\uc131\ud568. (2023. 12)"}),"\n",(0,n.jsx)(t.h2,{id:"routing-analysis",children:"Routing Analysis"}),"\n",(0,n.jsx)(t.p,{children:"\ud574\ub2f9 \ub17c\ubb38\uc5d0\uc11c \uc7ac\ubbf8\uc788\ub294 \ubd80\ubd84\uc774\ub2e4. \uc544\ub798 \uadf8\ub9bc\uc740 task \ubcc4\ub85c \ud1a0\ud070\uc774 \uac01 expert\ub85c routing\ub41c \ube44\uc728\uc744 \ub098\ud0c0\ub0b8 \uadf8\ub9bc\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4\uc11c, layer0 \uc5d0\uc11c \ube68\uac04\uc0c9(arxiv) \uc5d0\uc11c\ub294 \uac70\uc758 \uade0\ub4f1\ud558\uac8c routing \uc774 \ub41c \ubc18\uba74 \ub178\ub780\uc0c9(DM Mathematics) \uc5d0\uc11c\ub294 \uc870\uae08 \ub354 \ubd88\uade0\ub4f1\ud558\uac8c routing \ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,n.jsx)("div",{style:{textAlign:"Center"},children:(0,n.jsx)("img",{src:d,style:{border:"solid",width:600}})}),"\n",(0,n.jsx)(t.p,{children:"\uc800\uc790\ub4e4\uc740, DM Mathematics \ub97c \uc81c\uc678\ud558\uace0\ub294 task\uc5d0 \ub530\ub978 \ub77c\uc6b0\ud305\uc758 \ud070 \ucc28\uc774\ub97c \ubc1c\uacac\ud558\uc9c0 \ubabb\ud588\ub2e4\uace0 \uc774\uc57c\uae30 \ud569\ub2c8\ub2e4. DM Mathematics \uac00 \uc57d\uac04 \ub2e4\ub978 \uacbd\ud5a5\uc131\uc744 \ubcf4\uc5ec\uc8fc\ub294\ub370 \uc800\uc790\ub4e4\uc740 \uc774\ub97c 1. \ud569\uc131 \ub370\uc774\ud130\uc758 \ud55c\uacc4, 2. \uc790\uc5f0\uc5b4 \ucee4\ubc84\ub9ac\uc9c0\uac00 \uc801\uc740 \ub370\uc774\ud130\uc784\uc744 \uc774\uc720\ub85c \ub4ed\ub2c8\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:"\ub610\ud55c \ub370\uc774\ud130\uc758 \ud2b9\uc131\uc5d0 \ub530\ub978 \uc774\ub7ec\ud55c \ubd84\ud3ec\uc758 \ucc28\uc774\ub294 \ud2b9\ud788 hidden state \uac00 input / output sequence \uc640 \ub9e4\uc6b0 \ubc00\uc811\ud55c \uccab \ubc88\uc9f8\uc640 \ub9c8\uc9c0\ub9c9 \ub808\uc774\uc5b4\uc5d0\uc11c \ub450\ub4dc\ub7ec\uc9c4\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:"\uc774 \uc2e4\ud5d8 \uacb0\uacfc\ub294 \ub77c\uc6b0\ud305\uc758 semantic behavior \ubcf4\ub2e4 syntatic behavior \uc5d0 \uac15\ud558\ub2e4\ub294 \uc0ac\uc2e4\uc744 \ubcf4\uc5ec\uc900\ub2e4. \uac19\uc740 \ub3c4\uba54\uc778\uc5d0\uc11c \ube44\uc2b7\ud55c \uad6c\ubb38\uc801 \uc5ed\ud560\uc744 \ud558\ub294 \ud1a0\ud070\uc740 \ub2f9\uc5f0\ud558\uace0 \uc77c\ubd80 \ub2e4\ub978 \ub3c4\uba54\uc778(\uc5b8\uc5b4) \uc5d0\uc11c\ub3c4 \ube44\uc2b7\ud55c \uc5ed\ud560\uc744 \ud558\ub294 \ud1a0\ud070\uc774 \uac19\uc740 expert \ub85c \ub77c\uc6b0\ud305 \ub418\ub294 \uac83\uc744 \ud655\uc778\ud588\ub2e4\uace0 \ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \uc544\ub798 \uadf8\ub9bc\uc5d0\uc11c \uc601\uc5b4 \ubb38\uc7a5\uc5d0\uc11c 'Question' \uc774\ub77c\ub294 \ub2e8\uc5b4\uc640 \ud30c\uc774\uc36c\uc5d0\uc11c 'self' \ub77c\ub294 \ub2e8\uc5b4\uac00 \uac19\uc740 expert \ub85c \ub77c\uc6b0\ud305\ub41c\ub2e4."}),"\n",(0,n.jsxs)(t.p,{children:["\uc774 \ub0b4\uc6a9\uc740 ",(0,n.jsx)(t.a,{href:"/docs/practice/efficienttrain/MOE/moe2",children:"Adaptive Attention Span in Transformer"})," \uc5d0\uc11c \uad00\ucc30\ud55c attention layer \uc758 \uc5ed\ud560\uacfc \ub9e4\uc6b0 \ube44\uc2b7\ud558\ub2e4. \uc989, moe \ub294 \uc77c\uc885\uc758 adaptive attention span \uc5d0\uc11c \uac00\uc9c0\uace0 \uc788\ub358 \uc778\uc0ac\uc774\ud2b8\ub97c \ub2e4\ub978 \ubc29\uc2dd\uc73c\ub85c \uad6c\ud604\ud588\ub2e4\uace0 \ubd10\ub3c4 \ub420 \uac83 \uac19\ub2e4. MOE \ubaa8\ub4c8\uc740 \uae30\uc874 attention \ubaa8\ub4c8\uc758 \ube44\ud6a8\uc728\uc131\uc744 \uac1c\uc120\ud55c\ub2e4. Conversely, MOE\ub294 \uc644\uc804\ud788 \uc0c8\ub85c\uc6b4 \uc5ed\ud560\uc744 \ud558\ub294 \ubaa8\ub4c8\uc774 \uc544\ub2c8\ub77c dense \ubaa8\ub378\uc758 \uc5ed\ud560\uc744 \ub300\uccb4\ud560 \uc218 \uc788\ub294 \ud6a8\uc728\uc131 \uc788\ub294 \ubaa8\ub4c8\ub85c \ud574\uc11d\ud574\uc57c \ud55c\ub2e4\ub294 \uac83\uc744 \ub2e4\uc2dc \ud655\uc778\ud560 \uc218 \uc788\ub2e4."]}),"\n",(0,n.jsx)("div",{style:{textAlign:"Center"},children:(0,n.jsx)("img",{src:c,style:{border:"solid",width:600}})}),"\n",(0,n.jsx)(t.p,{children:"\ub610\ud55c, \uc800\uc790\ub4e4\uc740 \uc5f0\uc18d\ub41c \ud1a0\ud070\uc774 \uac19\uc740 expert \ub85c \ub77c\uc6b0\ud305\ub420 \ud655\ub960\uc774 higher layer\uc5d0\uc11c \uc720\uc758\ubbf8\ud558\uac8c \ub192\uc740 \uac83\uc744 \ud655\uc778\ud588\ub2e4."}),"\n",(0,n.jsx)("div",{style:{textAlign:"Center"},children:(0,n.jsx)("img",{src:o,style:{border:"solid",width:600}})}),"\n",(0,n.jsx)(t.p,{children:"either choice \ub294 latter token \uc774 former token \uacfc 2\uac1c\uc758 expert \uac00 \uc804\ubd80 \uc77c\uce58\ud55c \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. first \ub294 latter token \uc758 top-2 expert \uac00 former token \uc758 top-1 expert \ub9cc \ud3ec\ud568\ud558\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uadfc\ub370 \ucc38\uace0\ub85c \ub09c \uc0ac\uc2e4 \uc720\uc758\ubbf8\ud55c\uc9c0 \ubaa8\ub974\uaca0\ub2e4."}),"\n",(0,n.jsx)(t.h1,{id:"ref",children:"Ref"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://arxiv.org/pdf/2401.04088",children:"Mixtral of Experts"})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(f,{...e})}):f(e)}}}]);