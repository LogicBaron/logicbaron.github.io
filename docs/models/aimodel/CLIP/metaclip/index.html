<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-models/aimodel/CLIP/metaclip" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">MetaCLIP | Logic Baron</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://logicbaron.github.io/img/logicbaron_social_card.jpg"><meta data-rh="true" name="twitter:image" content="https://logicbaron.github.io/img/logicbaron_social_card.jpg"><meta data-rh="true" property="og:url" content="https://logicbaron.github.io/docs/models/aimodel/CLIP/metaclip"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MetaCLIP | Logic Baron"><meta data-rh="true" name="description" content="Demystifying CLIP Data"><meta data-rh="true" property="og:description" content="Demystifying CLIP Data"><link data-rh="true" rel="icon" href="/img/logicbaron_32.ico"><link data-rh="true" rel="canonical" href="https://logicbaron.github.io/docs/models/aimodel/CLIP/metaclip"><link data-rh="true" rel="alternate" href="https://logicbaron.github.io/docs/models/aimodel/CLIP/metaclip" hreflang="en"><link data-rh="true" rel="alternate" href="https://logicbaron.github.io/docs/models/aimodel/CLIP/metaclip" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YOUR_APP_ID-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Logic Baron RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Logic Baron Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Logic Baron JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Logic Baron" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.5cc6cde8.css">
<script src="/assets/js/runtime~main.c9c8b899.js" defer="defer"></script>
<script src="/assets/js/main.4da5fa15.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logicbaron.svg" alt="EyeStone Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logicbaron.svg" alt="EyeStone Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">LogicBaron</b></a><a class="navbar__item navbar__link" href="/docs/community/hello">Hello, Baron</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Concept</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/concepts/math/introduction">Math</a></li><li><a class="dropdown__link" href="/docs/concepts/mlconcept/introduction">Machine Learning</a></li><li><a class="dropdown__link" href="/docs/concepts/deeplearning/introduction">Deep Learning</a></li><li><a class="dropdown__link" href="/docs/concepts/largemodel/introduction">Large Model</a></li><li><a class="dropdown__link" href="/docs/concepts/programming/introduction">Programming</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/data/image/introduction">Image</a></li><li><a class="dropdown__link" href="/docs/data/text/introduction">Text</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Models</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/models/mlmodel/pca">ML Models</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/models/aimodel/intro">AI Models</a></li><li><a class="dropdown__link" href="/docs/models/largemodel/introduction">Large Models</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Practice</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/practice/torch/intro">Torch</a></li><li><a class="dropdown__link" href="/docs/practice/efficienttrain/Efficient Train">Efficient Train</a></li><li><a class="dropdown__link" href="/docs/practice/mlops/intorduction">MLOPs</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Tasks</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/tasks/recommendation/hello">Recommendation</a></li><li><a class="dropdown__link" href="/docs/tasks/informationextraction/hello">Information Extraction</a></li><li><a class="dropdown__link" href="/docs/tasks/retrieval/intro">Retrieval</a></li><li><a class="dropdown__link" href="/docs/tasks/knowledgegraph/knowledgegraph">Knowledge Graph</a></li><li><a class="dropdown__link" href="/docs/tasks/llm&amp;prompt/intro">LLM &amp; Prompt</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/logicbaron" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/models/aimodel/intro">AI Model</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/models/aimodel/Transformer/mhainitialization">Transformer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/models/aimodel/CLIP/">CLIP</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/models/aimodel/CLIP/">CLIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/models/aimodel/CLIP/albef">ALBEF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/models/aimodel/CLIP/blip">BLIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/models/aimodel/CLIP/blip2">BLIP-2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/models/aimodel/CLIP/metaclip">MetaCLIP</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/models/aimodel/SAM/">SAM</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">CLIP</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MetaCLIP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>MetaCLIP</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="demystifying-clip-data">Demystifying CLIP Data<a href="#demystifying-clip-data" class="hash-link" aria-label="Direct link to Demystifying CLIP Data" title="Direct link to Demystifying CLIP Data">​</a></h2>
<p>CLIP 논문은 성공적인 Language-Image Pre-training 모델이며 수많은 논문과 태스크에서 backbone 모델로 활용되고 있습니다. 최근의 연구들은 CLIP 논문과 모델의 성능에 대한 연구들은 CLIP의 모델 구조와 학습 프레임워크보다 <strong>그 데이터</strong>가 중요하게 작용했다고 보고 있습니다. 하지만 CLIP 데이터셑 생성 방법에 대한 정보는 거의 없습니다.</p>
<p>CLIP 이후 논문들이 CLIP 과 유사한 방식으로 web data를 수집하거나 CLIP dataset: WIT400M을 활용하여 추가적인 정제를  함으로써 성능 향상을 보여주는 맥락이 많아졌습니다. <strong>MetaCLI은 CLIP 데이터셑 자체에 조금 더 집중</strong>합니다. 데이터셑에 대해 공개된 내용이 별로 없으니, CLIP 논문을 집중적으로 파고듭니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantage-of-clips-curated-data">Advantage of CLIP&#x27;s Curated Data<a href="#advantage-of-clips-curated-data" class="hash-link" aria-label="Direct link to Advantage of CLIP&#x27;s Curated Data" title="Direct link to Advantage of CLIP&#x27;s Curated Data">​</a></h3>
<p>CLIP 데이터가 가지고 있는 가장 큰 강점 두가지가 있습니다.</p>
<p>첫 번째는 <strong>web data 를 전부 모으는 작업을 먼저 시작해(from sratch) 필터를 통한 bias를 제거</strong>합니다. 두 번째로, <strong>메타데이터에 대한 데이터 분포를 균형있게 조절</strong>하고 있습니다. 이는 데이터셑에 <strong>내재된 noise를 제거하지 않고 조정하는 형태로 보존</strong>합니다. Pretrain 모델 학습을 위한 데이터는 이러한 task-agnostic 한 특성이 특히 중요합니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="데이터---metaclip">데이터 - MetaCLIP<a href="#데이터---metaclip" class="hash-link" aria-label="Direct link to 데이터 - MetaCLIP" title="Direct link to 데이터 - MetaCLIP">​</a></h2>
<p>MetaCLIP 은 전체 data pool <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.02778em">D</span></span></span></span>와, data crawling에 사용된 쿼리 텍스트와 이미지 정보인 meta data <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span></span></span>으로부터 balanaced subset <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>D</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">D^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>을 생성하는 것: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>D</mi><mo>∗</mo></msup><mo>←</mo><mi>f</mi><mo stretchy="false">(</mo><mi>D</mi><mo separator="true">;</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D^* \gets f(D; M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em">D</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mclose">)</span></span></span></span> - 을 목표로 합니다. 이 과정을 Curation process라고 합니다. MetaCLIP 은 Curation 과정을 통해 400M사이즈의 데이터를 생성하고 CLIP 과 같은 모델, 훈련 파이프라인을 통해 더 향상된 성능을 보여줍니다.</p>
<p>MetaCLIP paper는 CLIP 논문에서 사용된 문장들을 분석하는 것을 위주로 데이터셑을 구성해 나갑니다.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">To address this, we constructed a new dataset of 400 million (image,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text) pairs collected from a variety of publicly available sources on the Internet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To attempt to cover as broad a set of visual concepts as possible,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">we search for (image, text) pairs as part of the construction process whose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text includes one of a set of 500,000 queries We approximately class balance the results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">by including up to 20,000 (image, text) pairs per query.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="meta-data-queryentry-collection">Meta Data: Query(Entry) Collection<a href="#meta-data-queryentry-collection" class="hash-link" aria-label="Direct link to Meta Data: Query(Entry) Collection" title="Direct link to Meta Data: Query(Entry) Collection">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The base query list is all words occurring at least 100 times in </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the English version of Wikipedia. This is augmented with bi-grams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with high pointwise mutual information as well as the names of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all Wikipedia articles above a certain search volume.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Finally all WordNet synsets not already in the query list are added.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>먼저 클립에서 사용한 50만개의 쿼리셑을 구성해야합니다. CLIP 논문을 기반으로 쿼리셑은 다음과 같이 구성됩니다.</p>
<ul>
<li>WordNet 의 모든 synset</li>
<li>영어 Wiki-Pedia 에서 100 번 이상한 등장한 unigram word.</li>
<li>high pointwise mutual information : 독립적으로 사용되는 것보다 함께 사용될 확률이 훨씬 높은 bi-gram</li>
<li>특정 횟수 이상 검색된 위키 피디아 문서의 제목</li>
</ul>
<p>MetaCLIP은 쿼리 개수를 기반으로 (3), (4) 항의 threshold를 추정합니다. (30, 70)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-pool-substring-matching--text---queryentry">Data pool: Substring Matching : Text -&gt; Query(Entry)<a href="#data-pool-substring-matching--text---queryentry" class="hash-link" aria-label="Direct link to Data pool: Substring Matching : Text -&gt; Query(Entry)" title="Direct link to Data pool: Substring Matching : Text -&gt; Query(Entry)">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">We also restrict this step in CLIP to text-only querying for sub-string matches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while most webly supervised work uses standard image search engines ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>CLIP의 data source는 알려져있지 않습니다. 다양한 source에서 수집했다고만 언급되어 집니다. MetaCLIP 은 CommonCrawl(CC)를 적용해서 iamge-text pair를 수집합니다. 그 후, sub-string match를 통해 query 와 매핑되는 텍스트를 정제합니다. 하나의 텍스트는 하나 이상의 entry와 매핑될 수 있습니다. 평균적으로 약 3.5개의 entry가 단일 텍스트에 매핑된다고 합니다.</p>
<p>최종적으로 이 과정을 통해서 1) <strong>low-quality texts are dropped</strong>, 2) <strong>unstrucuted text를 meta data의 집합이라는 structured form으로 표현 가능</strong>해집니다. Common Crawl을 통해 수집된 텍스트 중 50% 정도가 이 과정을 통과했으며, case-by-case rule-base filter를 통해 제거해야 하는 노이즈를 자동으로 제거할 수 있습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="entry---text-entry-관점에서-데이터-분석">Entry -&gt; Text: Entry 관점에서 데이터 분석<a href="#entry---text-entry-관점에서-데이터-분석" class="hash-link" aria-label="Direct link to Entry -&gt; Text: Entry 관점에서 데이터 분석" title="Direct link to Entry -&gt; Text: Entry 관점에서 데이터 분석">​</a></h4>
<p>text -&gt; entry mapping 의 역과정을 통해 <strong>entry -&gt; text 데이터를 구축</strong>할 수 있습니다. entry 에 매칭된 텍스트 수의 분포는 <strong>long-tail 분포</strong>를 형성하며 <strong>114k/500k 개의 entry가 매칭된 텍스트가 없었다</strong>고 합니다. 또한 <strong>상위 3.2% 의 entry 가 전체 데이터의 94.5% 에 해당하는 텍스트와 매칭</strong>이 되었다고 합니다. 그리고 이 상위 entry들은 <strong>주로 그렇게 의미가 없는 텍스트</strong>: &quot;외&quot;, &quot;사진&quot; - 과 같은 텍스트들이 많았습니다. 이러한 텍스트들은 <strong>특정한 visual concept가 없으므로 학습 과정에서 노이즈</strong>가 될 수 있습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sampling--balancing">Sampling : Balancing<a href="#sampling--balancing" class="hash-link" aria-label="Direct link to Sampling : Balancing" title="Direct link to Sampling : Balancing">​</a></h3>
<p>CLIP의 curation의 핵심은 matched entries의 숫자 균형을 맞추는 일입니다. 최대한 다양한 entry를 포함하는 텍스트를 샘플링하면서, 노이즈를 조정하는 작업입니다. MetaCLIP 논문은 entry마다 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>20</mn><mi>k</mi></mrow><annotation encoding="application/x-tex">t=20k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord">20</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span>개까지의 샘플을 샘플링합니다. metaCLIP 에서는 이 <strong>20k</strong>라는 샘플링 넘버에 <strong>magic number</strong>라는 거창한 이름을 붙입니다.</p>
<p>샘플링 과정은 랜덤 샘플링이 아닙니다. <strong>각각의 entry에 대해서 다양한 entry와 매칭된 텍스트일수록 높은 샘플링 확률을 가집니다.</strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="effect--sampling-balancing">Effect : Sampling, Balancing<a href="#effect--sampling-balancing" class="hash-link" aria-label="Direct link to Effect : Sampling, Balancing" title="Direct link to Effect : Sampling, Balancing">​</a></h4>
<p>entry-stratified sampling 방식은 Data Pool 형성 과정에서 언급한 <strong>1) long-tail problem을 완화</strong>시켜 줍니다. 또한 <strong>2) data distribution이 훨씬 더 다양해지고 균형</strong>이 맞추어집니다. 또한 <strong>3) 샘플링 로직으로 인해 풍부한 semantic information을 가진 텍스트가 데이터풀에서 많아지</strong>게 됩니다.</p>
<div style="text-align:Center"><img src="/assets/images/meta_20k-cabbfe276e771d18eb4f45fbcd7b39d1.png" style="border:solid;width:700px"></div>
<p>이 샘플링 과정을 효율적으로 하는 알고리즘 이야기를 하는데.. 크게 중요하지 않은 것 같습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="result">Result<a href="#result" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">​</a></h2>
<p>t=20k로 설정한 MetaCLIp이 openAI CLIP에 비해 평균적으로 더 좋은 성능을 보여주고 있습니다. t=140k 까지의 실험이 함께 진행 되었습니다. t=140k 사이즈 데이터셑이 더 좋은 성능을 보여주지만 각각 1B vs 4M 데이터셑 크기를 고려헀을 때 거의 수렴했다는 결론을 얻은 것으로 보입니다. 또한 <strong>t=20k 데이터는 일부 데이터셑에 fine-tuning 했을 때 더 좋은 성능</strong>을 보여주기도 했지만 일반적으로는 <strong>t=140k가 더 좋은 성능을 보이긴했지만 20k에 비해 거의 수렴한 결과</strong>로 보인다고 해석한 듯 합니다.</p>
<p>140k 정도면 Balancing이 의미없는 거 아니냐! Sampling Rule없이 raw 전체 데이터를 통해 학습한 결과 20k sampling에 비해 큰 성능 하락이 관찰 되었다고 합니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pipeline">Pipeline<a href="#pipeline" class="hash-link" aria-label="Direct link to Pipeline" title="Direct link to Pipeline">​</a></h2>
<div style="text-align:Center"><img src="/assets/images/meta_pipeline-891c77ebbe9bb5a9e4e2da05d99a4ce7.png" style="border:solid;width:500px"></div>
<p>논문에서는 데이터 처리의 각 과정을 어느 단계에서 수행했는지까지 공개합니다. 당연히, 이미지 다운로드와 같은 부하가 큰 작업등을 뒤쪽에 하는 데이터 수집 &amp; 정제의 효율을 최대화 하기 위한 파이프라이닝입니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>전 사실 이 논문을 보기 전까지는, CLIP이 단순히 엄청나게 많은 Web data crawling을 통해서 pretraining dataset을 구현했다고 생각하고 있었습니다. 그래서 이후 논문들의 CLIP 데이터 분석에 많이 집중을 했었는데 CLIP 논문 자체의 데이터에 대한 분석이 이 정도 깊이를 가질 수 있을 줄 몰랐습니다. 재미있는 논문이고, 데이터셑 구성이라는 관점에서 도움이 되는 논문같습니다.</p>
<p>학습 데이터 구축에서 언제나 고민되는 것 중 하나가 데이터의 balancing과 실제 데이  터 분포의 반영입니다. 이 논문에서는 이를 완화할 수 있는 적당한 solution을 제공한 것 같습니다. 다만 20k 라는 숫자에 대해서는 다른 태스크 적용할때 적절한 값으로 대체하기 힘들 것 같습니다.</p>
<h1>Ref</h1>
<ol>
<li><a href="https://arxiv.org/pdf/2309.16671.pdf" target="_blank" rel="noopener noreferrer">DEMYSTIFYING CLIP DATA</a></li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/logicbaron/logicbaron.github.io/tree/dev/docs/models/aimodel/CLIP/metaclip.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/models/aimodel/CLIP/blip2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BLIP-2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/models/aimodel/SAM/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SAM: Segment Anything</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#demystifying-clip-data" class="table-of-contents__link toc-highlight">Demystifying CLIP Data</a><ul><li><a href="#advantage-of-clips-curated-data" class="table-of-contents__link toc-highlight">Advantage of CLIP&#39;s Curated Data</a></li></ul></li><li><a href="#데이터---metaclip" class="table-of-contents__link toc-highlight">데이터 - MetaCLIP</a><ul><li><a href="#meta-data-queryentry-collection" class="table-of-contents__link toc-highlight">Meta Data: Query(Entry) Collection</a></li><li><a href="#data-pool-substring-matching--text---queryentry" class="table-of-contents__link toc-highlight">Data pool: Substring Matching : Text -&gt; Query(Entry)</a></li><li><a href="#sampling--balancing" class="table-of-contents__link toc-highlight">Sampling : Balancing</a></li></ul></li><li><a href="#result" class="table-of-contents__link toc-highlight">Result</a></li><li><a href="#pipeline" class="table-of-contents__link toc-highlight">Pipeline</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/community/hello">Hello, Lapis</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.instagram.com/or7l_floll/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/jhpark9701/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://https://github.com/logicbaron" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://leetcode.com/superstone/" target="_blank" rel="noopener noreferrer" class="footer__link-item">leetcode<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>